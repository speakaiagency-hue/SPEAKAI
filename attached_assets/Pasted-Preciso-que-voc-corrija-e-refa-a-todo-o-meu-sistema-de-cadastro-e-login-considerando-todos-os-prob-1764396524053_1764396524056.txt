Preciso que voc√™ corrija e refa√ßa todo o meu sistema de cadastro e login, considerando todos os problemas que j√° apareceram desde o in√≠cio do projeto. Aqui est√° o hist√≥rico e os requisitos:

---

üîß Problemas encontrados:
1. **Build no Render falhou** porque pacotes como `vite`, `tsx`, `@vitejs/plugin-react`, `@tailwindcss/vite` e plugins da Replit estavam em `devDependencies`. Isso causava erros de `ERR_MODULE_NOT_FOUND`.
   - Corre√ß√£o: mover esses pacotes para `dependencies` no `package.json`.

2. **Banco de dados**: o backend tentava se conectar usando hostname `base`, que s√≥ existe no Replit. No Render isso gerava:
Error: getaddrinfo ENOTFOUND base

C√≥digo
- Corre√ß√£o: usar `process.env.DATABASE_URL` com a URL real do Neon/Postgres, sem `psql` e sem aspas.

3. **Cadastro**: funcionava, mas a senha estava sendo salva em texto puro (ex: `Olivier1234$`).
- Corre√ß√£o: usar `bcrypt.hash(password, 10)` para salvar senha criptografada.

4. **Login**: falhava com "Email ou senha inv√°lidos" porque:
- O backend buscava usu√°rio por `username` em vez de `email`.
- A senha n√£o estava sendo comparada com `bcrypt.compare`.
- O token JWT n√£o estava sendo gerado/enviado corretamente.

5. **Rotas protegidas**: retornavam `401 Unauthorized - Invalid token`.
- Corre√ß√£o: middleware deve validar token JWT no header `Authorization: Bearer <token>`.

---

‚úÖ Requisitos para corre√ß√£o:
1. **Banco de dados PostgreSQL**
- Conectar usando `process.env.DATABASE_URL`.
- Usar SSL (`?sslmode=require`).

2. **Cadastro de usu√°rio**
- Validar campos obrigat√≥rios: nome, email, senha.
- Criptografar senha com `bcrypt`.
- Salvar no banco com `id (UUID)`, `name`, `email`, `password`.

3. **Login de usu√°rio**
- Buscar usu√°rio por email.
- Comparar senha com `bcrypt.compare`.
- Se v√°lido, gerar token JWT com `jwt.sign({ id: user.id }, process.env.JWT_SECRET, { expiresIn: "1h" })`.

4. **Autentica√ß√£o**
- Middleware `verifyToken` que verifica JWT.
- Se inv√°lido ou ausente, retornar `401 Unauthorized`.

5. **Vari√°veis de ambiente**
- `.env` deve conter:
  ```
  DATABASE_URL=postgresql://usuario:senha@host:porta/banco?sslmode=require
  JWT_SECRET=algumsegredo
  NODE_ENV=production
  ```

6. **Rotas**
- `POST /api/auth/register` ‚Üí cria usu√°rio
- `POST /api/auth/login` ‚Üí autentica e retorna token
- `GET /api/auth/check-membership` ‚Üí rota protegida, s√≥ acess√≠vel com token v√°lido

7. **Respostas**
- Em caso de erro: `{ error: "mensagem" }`
- Em caso de sucesso: `{ token: "..." }` ou `{ message: "Conta criada" }`

---

üì¶ Tecnologias usadas:
- Express
- PostgreSQL
- bcrypt
- jsonwebtoken
- dotenv
- Vite + React no frontend

üì¶ Altera√ß√µes no `package.json`:
- Mover `vite`, `tsx`, `@vitejs/plugin-react`, `@tailwindcss/vite` e plugins da Replit de `devDependencies` para `dependencies`.
- Garantir que `dependencies` contenha todas as libs usadas em produ√ß√£o:
- `express`
- `pg`
- `bcrypt`
- `jsonwebtoken`
- `dotenv`
- `react`
- `react-dom`
- `tailwindcss`
- `devDependencies` deve conter apenas ferramentas de desenvolvimento:
- `eslint`
- `prettier`
- `typescript` (se usado apenas para tipagem)
- Scripts corretos:
```json
"scripts": {
 "dev": "vite",
 "build": "vite build",
 "start": "node dist/index.cjs"
}
üéØ Objetivo: Gerar um sistema funcional de cadastro e login com seguran√ßa, pronto para deploy no Render, corrigindo todos os problemas desde o in√≠cio (depend√™ncias, banco, cadastro, login, JWT).

Por favor, reestruture o c√≥digo com base nesses requisitos e me entregue os arquivos principais:

authRoutes.ts (rotas de cadastro/login)

db.ts (conex√£o com banco)

middleware.ts (verifica√ß√£o JWT)

.env.example (vari√°veis necess√°rias)

vite.config.ts (corrigido sem depend√™ncias exclusivas do Replit)

package.json (com depend√™ncias ajustadas)